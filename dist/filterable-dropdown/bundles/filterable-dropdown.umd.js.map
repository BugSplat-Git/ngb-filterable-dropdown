{"version":3,"file":"filterable-dropdown.umd.js","sources":["ng://filterable-dropdown/lib/selection-type.ts","ng://filterable-dropdown/lib/filterable-dropdown.component.ts","ng://filterable-dropdown/lib/multi-select-pipe/multi-select-pipe.ts","ng://filterable-dropdown/lib/filterable-dropdown.module.ts"],"sourcesContent":["export enum SelectionType {\r\n    All = \"Select All\",\r\n    None = \"Select None\"\r\n}  ","import { Component, Input, Output, EventEmitter, ViewChild, ElementRef, ChangeDetectorRef } from '@angular/core';\nimport { AbstractControl, FormControl, FormGroup } from '@angular/forms';\nimport { SelectionType } from './selection-type';\nimport { faCheck } from '@fortawesome/free-solid-svg-icons';\nimport { ValueConverter } from '@angular/compiler/src/render3/view/template';\n\nexport interface FilterableItem {\n  value: string,\n  selected: boolean,\n}\n\n@Component({\n  selector: 'bugsplat-filterable-dropdown',\n  templateUrl: './filterable-dropdown.component.html',\n  styleUrls: ['./filterable-dropdown.component.scss']\n})\nexport class FilterableDropdownComponent {\n\n  public faCheck = faCheck;\n  public readonly SELECT_ALL = SelectionType.All;\n  public readonly SELECT_NONE = SelectionType.None;\n\n\n  @Input() autoClose: boolean | \"outside\" | \"inside\" = \"outside\";\n  @Input() items: Array<FilterableItem> = [];\n  @Input() disabled: boolean = false;\n  @Input() allowMultiSelect: boolean = true;\n\n  @Output() onItemsSelected: EventEmitter<Array<string>> = new EventEmitter<Array<string>>();\n  @Output() onOpen: EventEmitter<void> = new EventEmitter<void>();\n\n  @ViewChild('search', { static: true }) search: ElementRef;\n  @ViewChild('dropdown', { static: true }) dropdown: ElementRef;\n\n  public get allowToggleSelectAll(): boolean {\n    return (this.allowMultiSelect && this.searchInputValue.length === 0);\n  }\n\n  public get dropdownItems(): Array<string> {\n    return this.items.map(item=> item.value);\n  }\n\n  public get noItemsToDisplay(): boolean {\n    return this.filteredItems.length === 0;\n  }\n\n  nextToggleState: SelectionType = this.SELECT_ALL;\n\n  searchForm = new FormGroup({\n    searchInput: new FormControl()\n  });\n\n  constructor(private changeDetector: ChangeDetectorRef) { }\n\n  get selectedItems(): Array<string> {\n    const selectedItems =  this.items.filter(item => item.selected === true);\n    return selectedItems.map(item => item.value);\n  }\n\n  onSelectAll(): void {\n    this.items.forEach(item => item.selected = true);\n    this.nextToggleState = this.SELECT_NONE;\n    this.resetFilterInput();\n    this.onItemsSelected.emit(this.selectedItems);\n  }\n\n  onSelectNone(): void {\n    this.items.forEach(item => item.selected = false);\n    this.nextToggleState = this.SELECT_ALL;\n    this.resetFilterInput();\n    this.onItemsSelected.emit(this.selectedItems);\n  }\n\n  onItemSelect(item: FilterableItem) {\n    const itemIndex = this.items.findIndex(value => value.value === item.value);\n    if (itemIndex !== -1) {\n      this.items[itemIndex].selected = !this.items[itemIndex].selected;\n      if (!this.allowMultiSelect) {\n        this.items.forEach(value => {\n          if (value.value != item.value) {\n            value.selected = false;\n          }\n        });\n      }\n      this.onItemsSelected.emit(this.selectedItems);\n    }\n    this.resetFilterInput();\n  }\n\n  onOpenChange(open): void {\n    if (open) {\n      this.changeDetector.detectChanges();\n      this.search.nativeElement.focus();\n      this.onOpen.emit();\n    }\n  }\n\n  onEnterKeyPressed(): void {\n    if (this.allowMultiSelect) {\n      this.filteredItems.forEach(item => {\n        const itemIndex = this.items.indexOf(item)\n        if (itemIndex != -1) {\n          this.items[itemIndex].selected = true;\n        }\n      });\n      this.onItemsSelected.emit(this.selectedItems);\n    } else {\n      if (this.filteredItems.length) {\n        this.onItemSelect(this.filteredItems[0]);\n      }\n    }\n\n    this.resetFilterInput();\n  }\n\n  private resetFilterInput(): void {\n    this.searchInput.setValue(\"\");\n  }\n\n  get filteredItems(): Array<FilterableItem> {\n    if (!this.items) {\n      return [];\n    }\n\n    const lowerCaseSearchInputValue = this.searchInputValue.toLowerCase();\n    return this.items\n      .filter(item => !!item)\n      .filter(item => item.value.toLowerCase().indexOf(lowerCaseSearchInputValue) !== -1);\n  }\n\n  get searchInput(): AbstractControl {\n    return this.searchForm.controls[\"searchInput\"];\n  }\n\n  get searchInputValue(): string {\n    return this.searchInput.value || \"\";\n  }\n\n  isSelected(item: FilterableItem): boolean {\n    if (this.selectedItems && this.selectedItems.length) {\n      const itemIndex = this.items.findIndex(values => values.value == item.value);\n      return this.items[itemIndex].selected;\n    } else {\n      return false;\n    }\n  }\n}","import { PipeTransform, Pipe } from \"@angular/core\";\r\nimport { FilterableItem } from '../filterable-dropdown.component';\r\n\r\n@Pipe({\r\n  name: 'multiSelect'\r\n})\r\nexport class MultiSelectPipe implements PipeTransform {\r\n\r\n  public static readonly ALL_ITEMS_STRING = \"All\";\r\n  public static readonly MULTIPLE_ITEMS_STRING = \"Multiple\";\r\n\r\n  transform(val: Array<string>): string {\r\n    if (val.length === 0) {\r\n      return MultiSelectPipe.ALL_ITEMS_STRING;\r\n    } else if (val.length === 1) {\r\n      return val[0];\r\n    } else {\r\n      return MultiSelectPipe.MULTIPLE_ITEMS_STRING;\r\n    }\r\n  }\r\n}","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { FilterableDropdownComponent } from './filterable-dropdown.component';\nimport { MultiSelectPipe } from './multi-select-pipe/multi-select-pipe';\n\n\n\n\n@NgModule({\n  declarations: [FilterableDropdownComponent, MultiSelectPipe],\n  imports: [FormsModule,\n    ReactiveFormsModule,\n    CommonModule,\n    NgbModule,\n    FontAwesomeModule\n  ],\n  exports: [FilterableDropdownComponent]\n})\nexport class FilterableDropdownModule { }\n"],"names":["faCheck","EventEmitter","FormGroup","FormControl","Component","ChangeDetectorRef","Input","Output","ViewChild","Pipe","NgModule","FormsModule","ReactiveFormsModule","CommonModule","NgbModule","FontAwesomeModule"],"mappings":"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"}